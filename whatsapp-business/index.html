
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pingone-davinci.github.io/connector-docs/whatsapp-business/">
      
      
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>WhatsApp for Business - PingOne DaVinci Partner Connectors</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../mkdocs/overrides/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#whatsapp-for-business" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PingOne DaVinci Partner Connectors" class="md-header__button md-logo" aria-label="PingOne DaVinci Partner Connectors" data-md-component="logo">
      <!-- Logo -->
  
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PingOne DaVinci Partner Connectors
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WhatsApp for Business
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/pingone-davinci/connector-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pingone-davinci/connector-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PingOne DaVinci Partner Connectors" class="md-nav__button md-logo" aria-label="PingOne DaVinci Partner Connectors" data-md-component="logo">
      <!-- Logo -->
  
    </a>
    PingOne DaVinci Partner Connectors
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pingone-davinci/connector-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pingone-davinci/connector-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="whatsapp-for-business">WhatsApp for Business<a class="headerlink" href="#whatsapp-for-business" title="Permanent link"> ¶</a></h1>
<p>Author: Matthew Teets</p>
<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"> ¶</a></h1>
<p>You can use the WhatsApp connector to send templated messages to any WhatsApp account.</p>
<p>The WhatsApp connector so far has the single capability that allows the user to fillout WhatsApp templated messages, and send them from the connector to a single users WhatsApp account. The connector cannot receive any messsages or input from the recipient of the templated messages, but takes care of all API requests and variable formatting.</p>
<p>You can use the WhatsApp connector to send: <br>
* Text message templates <br>
   * A message template that uses only text for both the header and body of the message
* Media message templates <br>
   * A message template that uses an image URL for the header of the message and text for the body
* Interactive message templates <br>
   * A message template that reads end user input on interactive buttons attached to the message</p>
<h1 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link"> ¶</a></h1>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link"> ¶</a></h2>
<h4 id="for-information-and-setup-help-see-the-following-sections-of-the-whatsapp-api-documentation">For information and setup help, see the following sections of the WhatsApp API documentation:<a class="headerlink" href="#for-information-and-setup-help-see-the-following-sections-of-the-whatsapp-api-documentation" title="Permanent link"> ¶</a></h4>
<ul>
<li>WhatsApp API Documentation: <br></li>
<li><a href="https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-message-templates">Send Message Template Overview</a><ul>
<li><a href="https://developers.facebook.com/docs/whatsapp/message-templates/creation">Text-Based Message Template</a></li>
<li><a href="https://developers.facebook.com/docs/whatsapp/api/messages/message-templates/media-message-templates">Media-Based Message Template</a></li>
<li><a href="https://developers.facebook.com/docs/whatsapp/api/messages/message-templates/interactive-message-templates">Interactive Message Template</a></li>
</ul>
</li>
<li>
<p><a href="https://developers.facebook.com/docs/whatsapp/on-premises/reference/messages#message-templates">All API Parameters and Objects</a></p>
</li>
<li>
<p>DaVinci Documentation: <br></p>
</li>
<li><a href="https://portal.singularkey.com/dashboard">Login to DaVinci</a></li>
<li><a href="https://docs.pingidentity.com/bundle/davinci/page/kaf1643656046958.html">Import a flow from the Flow Library</a></li>
<li><a href="https://docs.pingidentity.com/bundle/davinci/page/srw1637101394177.html">Add Desired connector</a></li>
</ul>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link"> ¶</a></h2>
<h4 id="to-use-whatsapp-connector">To use WhatsApp connector:<a class="headerlink" href="#to-use-whatsapp-connector" title="Permanent link"> ¶</a></h4>
<ul>
<li><a href="https://developers.facebook.com/docs/whatsapp/business-management-api/get-started#1--acquire-an-access-token-using-a-system-user-or-facebook-login">Overview of Required Assets</a></li>
<li>This will help you generate the required access token.</li>
<li><a href="https://developers.facebook.com/docs/graph-api/">Current Graph API Version</a></li>
<li><a href="https://www.facebook.com/business/help/2055875911147364?id=2129163877102343">Message Template Creation</a></li>
<li><a href="https://developers.facebook.com/docs/whatsapp/message-templates/guidelines">Message Template Guidelines</a> </li>
</ul>
<h2 id="setting-up-the-connector">Setting up the connector<a class="headerlink" href="#setting-up-the-connector" title="Permanent link"> ¶</a></h2>
<h4 id="whatsapp-connector-general-settings">WhatsApp Connector General Settings:<a class="headerlink" href="#whatsapp-connector-general-settings" title="Permanent link"> ¶</a></h4>
<ul>
<li>Navigate to the WhatsApp connector via the <em><strong>Connections</strong></em> tab in DaVinci.</li>
<li>Select <em><strong>New Connection</strong></em> in the upper right-hand corner</li>
<li>Search for the desired connector (in this case, WhatsApp).</li>
<li>Click on the WhatsApp connector.</li>
<li>From here you will see two text fields: Access Token and Version</li>
<li>Access Token:<ul>
<li>Copy and paste your permanent access token into the corresponding text field.</li>
</ul>
</li>
<li>Version:<ul>
<li>The version will be filled out already.</li>
<li>Update the version if necessary.</li>
</ul>
</li>
</ul>
<h1 id="using-the-connector-in-a-flow">Using the connector in a flow<a class="headerlink" href="#using-the-connector-in-a-flow" title="Permanent link"> ¶</a></h1>
<h4 id="you-can-use-the-whatsapp-connector-in-a-variety-of-use-cases-such-as">You can use the WhatsApp connector in a variety of use cases, such as:<a class="headerlink" href="#you-can-use-the-whatsapp-connector-in-a-variety-of-use-cases-such-as" title="Permanent link"> ¶</a></h4>
<ul>
<li>Sending customers an automated, personal welcome/goodbye message.</li>
<li>Sending customers a confirmation message regarding a purchased product.</li>
<li>Sending customers reminders about current or upcoming deals and promotions.</li>
<li>etc...</li>
</ul>
<hr />
<h4 id="points-to-take-into-account-when-using-the-whatsapp-connector">Points to take into account when using the WhatsApp connector:<a class="headerlink" href="#points-to-take-into-account-when-using-the-whatsapp-connector" title="Permanent link"> ¶</a></h4>
<ul>
<li>The WhatsApp connector must have a trigger block before it will send any messages to the WhatsApp API (e.g. Custom HTML Message).</li>
<li>The WhatsApp connector does not generate any output on its own.</li>
<li>To see the the raw output from the WhatsApp connector you can do the following:<ul>
<li>Add a Custom HTML Message after your WhatsApp connector.  </li>
<li>Click on the HTML block and in the <em><strong>Message</strong></em> text field select the circular angel bracket button</li>
<li>From the dropdown, select the WhatsApp connector</li>
<li>On the same line as the <em><strong>output (object)</strong></em> click on the circular plus button</li>
</ul>
</li>
</ul>
<hr />
<h4 id="pre-requisites-to-using-whatsapp-connector-in-a-flow">Pre-requisites to using WhatsApp connector in a flow:<a class="headerlink" href="#pre-requisites-to-using-whatsapp-connector-in-a-flow" title="Permanent link"> ¶</a></h4>
<ul>
<li>You must have a working permanent access token.</li>
<li>You must have the current version of the graph API.</li>
<li>You must have a valid and approved message template.</li>
<li>You must have valid <em><strong>to</strong></em> and <em><strong>from</strong></em> WhatsApp phone numbes in order to send messages.</li>
</ul>
<hr />
<div class="highlight"><pre><span></span><code>Once the WhatsApp connector is properly configured and added to the flow studio sandbox you will be ready to start 
sending templated messsages to your WhatsApp customers (all message use cases directly rely upon the users pre-approved
message templates).
</code></pre></div>
<h2 id="text-message-template">Text Message Template<a class="headerlink" href="#text-message-template" title="Permanent link"> ¶</a></h2>
<p><div class="highlight"><pre><span></span><code>Compatible with templates that use:
- Body variable(s)
</code></pre></div>
<div class="highlight"><pre><span></span><code>Incompatible with templates that use:
- Text header variable
- Media header
- No body variable(s)
- Call to action buttons
- Quick reply buttons
</code></pre></div></p>
<h4 id="once-inside-of-the-flow-studio">Once inside of the flow studio:<a class="headerlink" href="#once-inside-of-the-flow-studio" title="Permanent link"> ¶</a></h4>
<ol>
<li>Add a Custom HTML Messsage connector to the sandbox.</li>
<li>Drag the black circular node on the right-side of the HTML connector out and release.</li>
<li>Select the WhatsApp connector.</li>
<li>Click on the connector and select the <strong>Send Message</strong> capability.</li>
<li>In the <em><strong>Recipient</strong></em> text field insert the desired WhatsApp phone number (the number of the account that will be receiving the message).</li>
<li>In the <em><strong>From Phone Number ID</strong></em> enter the phone number ID of the device sending the message.</li>
<li>Click on the <em><strong>Message Type</strong></em> dropdown menu and select the desired message template type.</li>
<li>In this case the type would be <em><strong>Text messsage template</strong></em>.</li>
<li>In the next text field labeled <em><strong>Text Message Template Name</strong></em> copy and paste the pre-approved message template name you created in the WhatsApp Facebook Developer Dashboard.</li>
<li>Now fill out the variables you except in the template:</li>
<li><em><strong>Variable Name</strong></em> = arbitrary user-created, camel-Case name of your variable<ul>
<li>Example: customerName</li>
</ul>
</li>
<li><em><strong>Value</strong></em> = what you want to be inserted in the message<ul>
<li>Example: Bob Smith</li>
</ul>
</li>
<li><em><strong>Data Type</strong></em> = depends on what the value of your variable is<ul>
<li>Example: String</li>
</ul>
</li>
<li>The final <em><strong>Add</strong></em> and <em><strong>Edit</strong></em> buttons are used to add/manipulate variables.</li>
</ol>
<h4 id="run-the-flow">Run the flow:<a class="headerlink" href="#run-the-flow" title="Permanent link"> ¶</a></h4>
<div class="highlight"><pre><span></span><code>Once you have successfully filled out the necessary connector information you are ready to send.   
In the upper right-hand corner of the Flow Studio click: Save, Deploy, and the blue play button.
</code></pre></div>
<h2 id="media-message-template">Media Message Template<a class="headerlink" href="#media-message-template" title="Permanent link"> ¶</a></h2>
<p><div class="highlight"><pre><span></span><code>Compatible with templates that use:
- Image header
- Body variable(s)
</code></pre></div>
<div class="highlight"><pre><span></span><code>Incompatible with templates that use:
- No body variable(s)
- Call to action buttons
- Quick reply buttons
</code></pre></div></p>
<h4 id="once-inside-of-the-flow-studio_1">Once inside of the flow studio:<a class="headerlink" href="#once-inside-of-the-flow-studio_1" title="Permanent link"> ¶</a></h4>
<ol>
<li>Add a Custom HTML Messsage connector to the sandbox.</li>
<li>Drag the black circular node on the right-side of the HTML connector out and release.</li>
<li>Select the WhatsApp connector.</li>
<li>Click on the connector and select the <strong>Send Message</strong> capability.</li>
<li>In the <em><strong>Recipient</strong></em> text field insert the desired WhatsApp phone number (the number of the account that will be receiving the message).</li>
<li>In the <em><strong>From Phone Number ID</strong></em> enter the phone number ID of the device sending the message.</li>
<li>Click on the <em><strong>Message Type</strong></em> dropdown menu and select the desired message template type.</li>
<li>In this case the type would be <em><strong>Media messsage template</strong></em>.</li>
<li>In the next text field labeled <em><strong>Media Message Template Name</strong></em> copy and paste the pre-approved message template name you created in the WhatsApp Facebook Developer Dashboard.</li>
<li>The <em><strong>Media Message URL</strong></em> text field is where you copy and paste the header image URL.</li>
<li>Use only HTTP/HTTPS URLs.</li>
<li>Now fill out the variables you except in the template:<ul>
<li><em><strong>Variable Name</strong></em> = arbitrary user-created, camel-Case name of your variable</li>
<li>Example: customerName</li>
<li><em><strong>Value</strong></em> = what you want to be inserted in the message</li>
<li>Example: Bob Smith</li>
<li><em><strong>Data Type</strong></em> = depends on what the value of your variable is</li>
<li>Example: String</li>
</ul>
</li>
<li>The final <em><strong>Add</strong></em> and <em><strong>Edit</strong></em> buttons are used to add/manipulate variables.</li>
</ol>
<h4 id="run-the-flow_1">Run the flow:<a class="headerlink" href="#run-the-flow_1" title="Permanent link"> ¶</a></h4>
<div class="highlight"><pre><span></span><code>Once you have successfully filled out the necessary connector information you are ready to send.   
In the upper right-hand corner of the Flow Studio click: Save, Deploy, and the blue play button.
</code></pre></div>
<h2 id="interactive-message-template">Interactive Message Template<a class="headerlink" href="#interactive-message-template" title="Permanent link"> ¶</a></h2>
<p><div class="highlight"><pre><span></span><code>Compatible with templates that use:
- Body variable(s)
- Call to action buttons (either/both)
</code></pre></div>
<div class="highlight"><pre><span></span><code>Incompatible with templates that use:
- Text header variable
- Media header
- No body variable(s)
- Quick reply buttons
</code></pre></div></p>
<h4 id="once-inside-of-the-flow-studio_2">Once inside of the flow studio:<a class="headerlink" href="#once-inside-of-the-flow-studio_2" title="Permanent link"> ¶</a></h4>
<ol>
<li>Add a Custom HTML Messsage connector to the sandbox.</li>
<li>Drag the black circular node on the right-side of the HTML connector out and release.</li>
<li>Select the WhatsApp connector.</li>
<li>Click on the connector and select the <strong>Send Message</strong> capability.</li>
<li>In the <em><strong>Recipient</strong></em> text field insert the desired WhatsApp phone number (the number of the account that will be receiving the message).</li>
<li>In the <em><strong>From Phone Number ID</strong></em> enter the phone number ID of the device sending the message.</li>
<li>Click on the <em><strong>Message Type</strong></em> dropdown menu and select the desired message template type.</li>
<li>In this case the type would be <em><strong>Interactive messsage template</strong></em>.</li>
<li>In the next text field labeled <em><strong>Interactive Message Template Name</strong></em> copy and paste the message template name you created in the Facebook WhatsApp Developer Dashboard.</li>
<li>The <em><strong>Visit Website</strong></em> button is handled during the creation of the message template, thus no configuration is required within the connector.</li>
<li>The same rules apply to the <em><strong>Call phone number</strong></em> button, no configuration is required inside of the WhatsApp connector.</li>
<li>Now fill out the variables you except in the template:<ul>
<li><em><strong>Variable Name</strong></em> = arbitrary user-created, camel-Case name of your variable</li>
<li>Example: customerName</li>
<li><em><strong>Value</strong></em> = what you want to be inserted in the message</li>
<li>Example: Bob Smith</li>
<li><em><strong>Data Type</strong></em> = depends on what the value of your variable is</li>
<li>Example: String</li>
</ul>
</li>
<li>The final <em><strong>Add</strong></em> and <em><strong>Edit</strong></em> buttons are used to add/manipulate variables.</li>
</ol>
<h4 id="run-the-flow_2">Run the flow:<a class="headerlink" href="#run-the-flow_2" title="Permanent link"> ¶</a></h4>
<div class="highlight"><pre><span></span><code>Once you have successfully filled out the necessary connector information you are ready to send.   
In the upper right-hand corner of the Flow Studio click: Save, Deploy, and the blue play button.
</code></pre></div>
<h1 id="capabilities">Capabilities<a class="headerlink" href="#capabilities" title="Permanent link"> ¶</a></h1>
<h3 id="send-message-template-sendmessage">Send Message Template (sendMessage)<a class="headerlink" href="#send-message-template-sendmessage" title="Permanent link"> ¶</a></h3>
<p>Sends a WhatsApp message template to a phone number.</p>
<h4 id="recipient-textfield-required">Recipient <code>textField</code> <code>required</code><a class="headerlink" href="#recipient-textfield-required" title="Permanent link"> ¶</a></h4>
<p>Recipient of the WhatsApp message.</p>
<h4 id="from-phone-number-id-textfield-required">From Phone Number ID <code>textField</code> <code>required</code><a class="headerlink" href="#from-phone-number-id-textfield-required" title="Permanent link"> ¶</a></h4>
<p>WhatsApp from phone number ID.</p>
<h4 id="message-type-dropdown-required">Message Type <code>dropDown</code> <code>required</code><a class="headerlink" href="#message-type-dropdown-required" title="Permanent link"> ¶</a></h4>
<p>WhatsApp message type</p>
<ul>
<li>Text message template</li>
<li>Media message template</li>
<li>Interactive message template</li>
</ul>
<h4 id="text-message-template-name-textfield">Text Message Template Name <code>textField</code><a class="headerlink" href="#text-message-template-name-textfield" title="Permanent link"> ¶</a></h4>
<p>WhatsApp text message template name (from WhatsApp dashboard)</p>
<h4 id="media-message-template-name-textfield">Media Message Template Name <code>textField</code><a class="headerlink" href="#media-message-template-name-textfield" title="Permanent link"> ¶</a></h4>
<p>WhatsApp media template name (from WhatsApp dashboard)</p>
<h4 id="media-message-url-textfield">Media Message URL <code>textField</code><a class="headerlink" href="#media-message-url-textfield" title="Permanent link"> ¶</a></h4>
<p>Media URL for the image being sent.</p>
<h4 id="interactive-message-template-name-textfield">Interactive Message Template Name <code>textField</code><a class="headerlink" href="#interactive-message-template-name-textfield" title="Permanent link"> ¶</a></h4>
<p>WhatsApp interactive template name (from WhatsApp dashboard)</p>
<h4 id="template-variables-variableinputlist">Template Variables <code>variableInputList</code><a class="headerlink" href="#template-variables-variableinputlist" title="Permanent link"> ¶</a></h4>
<p>Variables for WhatsApp message template.</p>
<hr />
<h3 id="make-custom-api-call-makecustomapicall">Make Custom API Call (makeCustomApiCall)<a class="headerlink" href="#make-custom-api-call-makecustomapicall" title="Permanent link"> ¶</a></h3>
<p>Define a custom API call to WhatsApp Business.</p>
<h4 id="endpoint-textfield-required">Endpoint <code>textField</code> <code>required</code><a class="headerlink" href="#endpoint-textfield-required" title="Permanent link"> ¶</a></h4>
<p>The WhatsApp Business API endpoint, such as "/messages/register/deregister/media/request_code".</p>
<h4 id="from-phone-number-id-textfield-required_1">From Phone Number ID <code>textField</code> <code>required</code><a class="headerlink" href="#from-phone-number-id-textfield-required_1" title="Permanent link"> ¶</a></h4>
<p>WhatsApp from phone number ID.</p>
<h4 id="method-dropdown-required">Method <code>dropDown</code> <code>required</code><a class="headerlink" href="#method-dropdown-required" title="Permanent link"> ¶</a></h4>
<p>The HTTP Method.</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>PATCH</li>
</ul>
<h4 id="query-parameters-keyvaluelist">Query Parameters <code>keyValueList</code><a class="headerlink" href="#query-parameters-keyvaluelist" title="Permanent link"> ¶</a></h4>
<p>Add query parameters and provide their values.</p>
<h4 id="headers-keyvaluelist">Headers <code>keyValueList</code><a class="headerlink" href="#headers-keyvaluelist" title="Permanent link"> ¶</a></h4>
<p>Add HTTP headers and provide their values.</p>
<h4 id="body-codeeditor">Body <code>codeEditor</code><a class="headerlink" href="#body-codeeditor" title="Permanent link"> ¶</a></h4>
<p>The raw formatted JSON body.</p>
<hr />
<h3 id="whatsapp-message-webhook-webhook">WhatsApp Message Webhook (webhook)<a class="headerlink" href="#whatsapp-message-webhook-webhook" title="Permanent link"> ¶</a></h3>
<p>Webhook triggered when a message is received or message status has changed.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © Copyright 2022 Ping Identity
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "instant"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>